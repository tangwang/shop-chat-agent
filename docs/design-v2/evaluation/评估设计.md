# 评估设计（LLM 应用测试驱动）

## 1. 目标

由于导购回复存在非确定性，需要用“自动评估 + 人工抽检”保障质量迭代。

## 2. 评估对象

1. Orchestrator 计划质量
2. Assistant 回复质量
3. 工具调用有效性
4. 全链路转化导向能力

## 3. 指标

- 槽位抽取完整度（category/scene/style/effect/budget/size）
- 缺口判断合理性
- 提问质量（用户立场、问题数量、非机械化）
- 推荐相关性
- 解释专业度
- 回复可读性与礼貌性
- 转化推动性（是否引导下一步）

## 4. 评估方法

1. 规则评估
   - JSON schema 合法性
   - 每轮提问数 <= 2
   - 非法技能调用检测（例如 web_search 误触发）

2. LLM-as-judge
   - 用统一评分 Rubric 打分（1-5）
   - 产出总分 + 维度分 + 失败原因

3. 回归机制
   - 每次 prompt/工具逻辑变更均跑评估集
   - 设阈值（例如总分低于基线 -3% 不允许上线）

## 5. 数据集建议

覆盖至少以下场景：

- 意图模糊探索
- 明确目标搜索
- 多商品对比
- 搭配建议
- 趋势术语解释（需 web_search）
- 预算/尺码/禁忌约束

